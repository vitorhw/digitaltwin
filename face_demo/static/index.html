<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Face Avatar Demo (Standalone)</title>
  <link rel="icon" type="image/png" href="/static/favicon.png">
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; }
    header { padding: 12px 16px; background: #0f172a; color: white; }
    main { padding: 16px; }
    .row { display: flex; gap: 16px; align-items: flex-start; }
    .col { flex: 1; }
    .panel { border: 1px solid #e5e7eb; background: #f9fafb; padding: 12px; border-radius: 8px; }
    .canvas-wrap { display: flex; align-items: center; justify-content: center; width: 100%; aspect-ratio: 1/1; background: #eef2ff; border: 1px solid #c7d2fe; border-radius: 8px; }
    button { cursor: pointer; border: 0; background: #2563eb; color: white; padding: 8px 12px; border-radius: 6px; }
    button[disabled] { opacity: .6; cursor: not-allowed; }
    select, input[type="text"] { border: 1px solid #e5e7eb; padding: 6px 8px; border-radius: 6px; width: 100%; }
    .chatlog { height: 160px; overflow: auto; background: white; border: 1px solid #e5e7eb; padding: 8px; border-radius: 6px; }
    .msg.me { color: #111827; }
    .msg.bot { color: #1d4ed8; }
    .footer { margin-top: 24px; font-size: 12px; color: #6b7280; }
    img.preview { max-width: 100%; border: 1px solid #e5e7eb; border-radius: 8px; }
    .controls { display:flex; gap:8px; }
  </style>
</head>
<body>
  <header><strong>Face Avatar Demo (Standalone)</strong></header>
  <main>
    <div class="row">
      <div class="col">
        <div class="panel">
          <p><strong>1) Upload a face photo</strong></p>
          <input id="file" type="file" accept="image/*">
          <div style="margin-top:8px;">
            <button id="btnGen" disabled>Generate Avatar</button>
          </div>
          <div id="previewWrap" style="margin-top:12px; display:none;">
            <p><strong>Original image</strong></p>
            <img id="preview" class="preview" alt="preview">
          </div>
        </div>
      </div>
      <div class="col">
        <div class="panel">
          <div class="canvas-wrap">
            <canvas id="webgl"></canvas>
          </div>
          <div style="margin-top:8px;" class="controls">
            <label for="voice" style="align-self:center;">Voice:</label>
            <select id="voice">
              <option value="">Default</option>
              <option value="Zira">Zira (Female)</option>
              <option value="David">David (Male)</option>
            </select>
          </div>
          <div style="margin-top:8px;" class="chatlog" id="chat"></div>
          <div class="controls" style="margin-top:8px;">
            <input id="chatInput" type="text" placeholder="Type a message...">
            <button id="send">Send</button>
          </div>
          <div class="footer">
            Tip: Rotate the head gently with mouse. It remains facing you.
          </div>
        </div>
      </div>
    </div>
  </main>

  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.161.0/examples/jsm/"
    }
  }
  </script>
    <script type="module" src="/static/js/app.js"></script>
    

</body>
</html>
